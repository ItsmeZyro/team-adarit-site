<!DOCTYPE html>
<html>
<head>
    <title>Calculator ni Ayzu</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');

        * { box-sizing: border-box; }

        body {
            margin: 0;
            font-family: 'Roboto', sans-serif;
            background: #8dbbf3;
            display: flex;
            min-height: 100vh;
        }

        /* SIDEBAR */
        .sidebar {
            width: 220px;
            background: #1f2937;
            color: white;
            padding: 20px;
            transition: 0.3s;
        }

        .sidebar h3 {
            text-align: center;
            margin-bottom: 30px;
        }

        .sidebar button {
            width: 100%;
            padding: 12px;
            margin-bottom: 10px;
            border: none;
            border-radius: 8px;
            background: #374151;
            color: white;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
        }

        .sidebar button:hover { background: #4b5563; }

        /* MAIN CONTENT */
        .main {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            padding: 25px;
            border-radius: 20px;
            width: 100%;
            max-width: 420px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        h2 { text-align: center; margin-bottom: 20px; }

        label {
            display: block;
            margin-top: 15px;
            margin-bottom: 5px;
            font-weight: 500;
        }

        select {
            width: 100%;
            padding: 12px;
            border-radius: 10px;
            border: 1px solid #ccc;
            font-size: 15px;
        }

        #result1, #result2 {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 16px;
        }

        .success { background: #d1fae5; color: #065f46; }
        .error { background: #fee2e2; color: #991b1b; }

        .page { display: none; }
        .active { display: block; }

        /* ðŸ“± MOBILE RESPONSIVE */
        @media (max-width: 768px) {
            body { flex-direction: column; }

            .sidebar {
                width: 100%;
                display: flex;
                justify-content: space-around;
                align-items: center;
                padding: 10px;
            }

            .sidebar h3 { display: none; }

            .sidebar button {
                width: auto;
                margin: 0;
                padding: 10px 15px;
                font-size: 13px;
            }

            .main { padding: 15px; }

            .container { padding: 20px; border-radius: 15px; }
        }
    </style>
</head>
<body>

<div class="sidebar">
    <h3>Ayzu Fare</h3>
    <button onclick="showPage('single')">Single Drop</button>
    <button onclick="showPage('distance')">Pickup â†’ Drop</button>
</div>

<div class="main">

    <!-- SINGLE DROP -->
    <div class="container page active" id="single">
        <h2>Single Drop Fare</h2>

        <label>Route:</label>
        <select id="route1" onchange="updateStops1()">
            <option value="Bulakan-Malolos">Bulakan â†’ Malolos</option>
            <option value="Malolos-Bulakan">Malolos â†’ Bulakan</option>
        </select>

        <label>Drop-off:</label>
        <select id="stop1" onchange="calculateSingle()"></select>

        <label>Fare Type:</label>
        <select id="fareType1" onchange="calculateSingle()">
            <option value="regular">Regular</option>
            <option value="discount">Discount</option>
        </select>

        <label>Passengers:</label>
        <select id="passengers1" onchange="calculateSingle()">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>

        <label>Cash:</label>
        <select id="cash1" onchange="calculateSingle()">
            <option value="20">â‚±20</option>
            <option value="50">â‚±50</option>
            <option value="100">â‚±100</option>
            <option value="200">â‚±200</option>
        </select>

        <div id="result1"></div>
    </div>

    <!-- DISTANCE -->
    <div class="container page" id="distance">
        <h2>Pickup â†’ Drop-off Fare</h2>

        <label>Route:</label>
        <select id="route2" onchange="updateStops2()">
            <option value="Bulakan-Malolos">Bulakan â†’ Malolos</option>
            <option value="Malolos-Bulakan">Malolos â†’ Bulakan</option>
        </select>

        <label>Pickup:</label>
        <select id="pickup" onchange="calculateDistance()"></select>

        <label>Drop-off:</label>
        <select id="dropoff" onchange="calculateDistance()"></select>

        <label>Fare Type:</label>
        <select id="fareType2" onchange="calculateDistance()">
            <option value="regular">Regular</option>
            <option value="discount">Discount</option>
        </select>

        <label>Passengers:</label>
        <select id="passengers2" onchange="calculateDistance()">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>

        <label>Cash:</label>
        <select id="cash2" onchange="calculateDistance()">
            <option value="20">â‚±20</option>
            <option value="50">â‚±50</option>
            <option value="100">â‚±100</option>
            <option value="200">â‚±200</option>
        </select>

        <div id="result2"></div>
    </div>

</div>

<script>
const routes = {
    "Bulakan-Malolos": [
        "PITPITAN/SANJOSE","MAYSANTOL/SAN NICOLAS","MAMBOG","MATIMBO",
        "PANASAHAN","BAGNA","ATLAG","SAN JUAN/STO. ROSARIO"
    ],
    "Malolos-Bulakan": [
        "SAN JUAN/ATLAG","BAGNA/PANASAHAN","MATIMBO","MAMBOG",
        "PITPITAN","SAN NICOLAS","MAYSANTOL","SANJOSE/BAGUMBAYAN"
    ]
};

function showPage(pageId){
    document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
    document.getElementById(pageId).classList.add('active');
}

function updateStops1(){
    const route=document.getElementById("route1").value;
    const stop=document.getElementById("stop1");
    stop.innerHTML="";
    routes[route].forEach((s,i)=>stop.innerHTML+=`<option value="${i}">${s}</option>`);
    calculateSingle();
}

function calculateSingle(){
    const i=parseInt(stop1.value);
    const type=fareType1.value;
    const p=parseInt(passengers1.value);
    const cash=parseFloat(cash1.value);
    if(isNaN(i)) return;

    let fare=13;
    if(i>=4) fare+=(i-3)*2;
    if(type==="discount") fare-=2;

    const total=fare*p;
    const change=cash-total;

    result1.innerHTML="Total Fare: â‚± "+total.toLocaleString()+
        (change<0? "<br>Kulang â‚±"+Math.abs(change) :
        "<br>Change: â‚± "+change.toLocaleString());

    result1.className=change<0?"error":"success";
}

function updateStops2(){
    const route=document.getElementById("route2").value;
    pickup.innerHTML="";
    dropoff.innerHTML="";
    routes[route].forEach((s,i)=>{
        pickup.innerHTML+=`<option value="${i}">${s}</option>`;
        dropoff.innerHTML+=`<option value="${i}">${s}</option>`;
    });
    calculateDistance();
}

function calculateDistance(){
    const a=parseInt(pickup.value);
    const b=parseInt(dropoff.value);
    const type=fareType2.value;
    const p=parseInt(passengers2.value);
    const cash=parseFloat(cash2.value);
    if(isNaN(a)||isNaN(b)) return;

    const dist=Math.abs(b-a);
    if(dist===0){
        result2.innerHTML="Pickup and Drop-off cannot be same.";
        result2.className="error";
        return;
    }

    let fare=13;
    if(dist>4) fare+=(dist-4)*2;
    if(type==="discount") fare-=2;

    const total=fare*p;
    const change=cash-total;

    result2.innerHTML="Distance: "+dist+" barangay(s)<br>Total Fare: â‚± "+total.toLocaleString()+
        (change<0? "<br>Kulang â‚±"+Math.abs(change) :
        "<br>Change: â‚± "+change.toLocaleString());

    result2.className=change<0?"error":"success";
}

updateStops1();
updateStops2();
</script>

</body>
</html>
